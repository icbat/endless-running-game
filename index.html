<html>

<head>
    <script src="https://code.jquery.com/jquery-3.1.0.min.js" integrity="sha256-cCueBR6CsyA4/9szpPfrX3s49M9vUU5BgtiJj06wt/s=" crossorigin="anonymous"></script>
</head>

<body>
    <div id="launches">
        <h2>Launches</h2>
        <div class="metric"></div>
    </div>
    <div id="gamesStarted">
        <h2>Games Played</h2>
        <div class="metric"></div>
    </div>
    <div id="uniqueInstallsThatHaveBeenStarted">
        <h2>Installations</h2>
        Unique installations that have actually been started at least once.
        <div class="metric"></div>
    </div>
    <div id="usersHaveStartedGames">
        <h2>Players who played</h2>
        Percentage of unique users who have both launch the app and also managed to figure out how to play.
        <div class="metric"></div>
    </div>
    <div id="deathsPerObstacle"></div>
    <div id="avgScore"></div>
    <div id="scoreScatterplot"></div>
</body>

<script>
    var baseUrl = "https://square-squared-stats.herokuapp.com/";
    $.ajax(baseUrl + 'launch', {
        dataType: "json",
        method: "GET",
        success: function(response) {
            $('#launches .metric').text(response.total);
        }
    });

    $.ajax(baseUrl + 'gameStart', {
        dataType: "json",
        method: "GET",
        success: function(response) {
            $('#gamesStarted .metric').text(response.total);
        }
    });

    $.ajax(baseUrl + 'launch/distinct', {
        dataType: "json",
        method: "GET",
        success: function(response) {
            $('#uniqueInstallsThatHaveBeenStarted .metric').text(response.total);
        }
    });

    $.ajax(baseUrl + 'launch/distinct', {
        dataType: "json",
        method: "GET",
        success: function(launchResponse) {

            $.ajax(baseUrl + 'gameStart/distinct', {
                dataType: "json",
                method: "GET",
                success: function(gameStartResponse) {
                    var percentage = gameStartResponse.total / launchResponse.total * 100;
                    $('#usersHaveStartedGames .metric').text(percentage + "%");
                }
            });
        }
    });
</script>

</html>
